(this["webpackJsonpzone-scheduler"]=this["webpackJsonpzone-scheduler"]||[]).push([[0],{29:function(e,t,a){e.exports=a(44)},34:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),l=(a(34),a(35),a(36),a(8)),o=a(5),u=(a(37),a(7)),m=a(27),s=a(3),i=function(e,t){switch(t.type){case"REMOVE_SCHEDULE":return Object(s.a)(Object(s.a)({},e),{},{schedules:e.schedules.filter((function(e){return e.id!==t.payload}))});case"ADD_SCHEDULE":return Object(s.a)(Object(s.a)({},e),{},{schedules:[].concat(Object(m.a)(e.schedules),[t.payload])});case"EDIT_SCHEDULE":var a=t.payload,n=e.schedules.map((function(e){return e.id===a.id?a:e}));return Object(s.a)(Object(s.a)({},e),{},{schedules:n});case"CHANGE_SCALE":var r=t.payload;e.scale=r;var c=e.schedules.map((function(e){return e.temperature=function(e,t){return"C"===t?9*e/5+32:5*(e-32)/9}(e.temperature,r),e}));return Object(s.a)(Object(s.a)({},e),{},{schedules:c});default:return e}},d={scale:"C",schedules:[{id:1,name:"Sample Schedule",zoneId:1,zone:"Office",time:"10.23",temperature:30}]},p=Object(n.createContext)(d),b=function(e){var t=e.children,a=Object(n.useReducer)(i,d),c=Object(u.a)(a,2),l=c[0],o=c[1];return r.a.createElement(p.Provider,{value:{schedules:l.schedules,scale:l.scale,removeSchedule:function(e){o({type:"REMOVE_SCHEDULE",payload:e})},addSchedule:function(e){o({type:"ADD_SCHEDULE",payload:e})},editSchedule:function(e){o({type:"EDIT_SCHEDULE",payload:e})},changeScale:function(e){o({type:"CHANGE_SCALE",payload:e})}}},t)},E=function(){var e=Object(n.useContext)(p),t=e.scale,a=e.changeScale,c=function(e){t!==e&&a(e)};return r.a.createElement("div",{className:"container"},r.a.createElement("nav",{className:"navbar justify-content-center navbar-light bg-light"},r.a.createElement(o.c,{className:"navbar-brand",to:"/"},"Zone Scheduler")),r.a.createElement("div",{className:"clearfix mt-3"},r.a.createElement(o.b,{to:"/create"},r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary"},"Create Schedule")),r.a.createElement("div",{className:"float-right"},r.a.createElement("div",{className:"btn-group btn-group-sm",role:"group"},r.a.createElement("button",{type:"button",className:"C"===t?"btn btn-secondary btn-secondary active":"btn btn-secondary",onClick:function(){c("C")}},"\xb0C"),r.a.createElement("button",{type:"button",className:"F"===t?"btn btn-secondary active":"btn btn-secondary",onClick:function(){c("F")}},"\xb0F")))))},f=function(e){var t=e.searchTerm,a=Object(n.useContext)(p),c=a.schedules,l=a.removeSchedule,m=a.editSchedule,s=a.scale,i=r.a.useState([]),d=Object(u.a)(i,2),b=d[0],E=d[1];return Object(n.useEffect)((function(){var e=c.filter((function(e){return e.zone.toLowerCase().includes(t)}));E(e)}),[t,c]),r.a.createElement(n.Fragment,null,b.length>0?r.a.createElement("ul",{className:"list-group"},b.map((function(e){return r.a.createElement("li",{className:"list-group-item",key:e.id},r.a.createElement("h6",{className:"my-0 pb-1"},e.zone),r.a.createElement("div",{className:"text-muted"},e.name," - ",e.time," ",r.a.createElement("span",{className:"badge badge-secondary"},e.temperature.toFixed(2)," \xb0",s)),r.a.createElement("div",{className:"d-block mt-1",role:"group"},r.a.createElement(o.b,{to:"/edit/".concat(e.id)},r.a.createElement("button",{className:"btn btn-link btn-sm d-inline pl-0",onClick:function(){return m(e.id)}},"Edit")),r.a.createElement("button",{className:"btn btn-light btn-sm",onClick:function(){return l(e.id)}},"Remove")))}))):r.a.createElement("p",{className:"text-center py-5"},"No Data"))},v=function(){var e=r.a.useState(""),t=Object(u.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{className:"container pt-0"},r.a.createElement("input",{type:"search",className:"form-control mb-3",placeholder:"Search by Zone",value:a,onChange:function(e){n(e.target.value)}}),r.a.createElement(f,{searchTerm:a}))},h=a(14),g=a(10),y=a.n(g),N=a(15),O={getZones:function(){var e=Object(N.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://my-json-server.typicode.com/ivanturianytsia-envio/json-data","/zones"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},j=function(e){var t,a,c=Object(n.useContext)(p),m=c.addSchedule,i=c.schedules,d=c.editSchedule,b=c.scale,E=Object(l.g)(),f=null===e||void 0===e||null===(t=e.match)||void 0===t||null===(a=t.params)||void 0===a?void 0:a.id,v=!(void 0===f),g=Object(n.useState)([]),j=Object(u.a)(g,2),C=j[0],S=j[1],x=Object(n.useState)({id:-1,name:"",time:"",zoneId:-1,zone:"",temperature:0}),z=Object(u.a)(x,2),k=z[0],I=z[1];Object(n.useEffect)((function(){var e=f;if(e){var t=i.find((function(t){return t.id===parseInt(e)}));I(t)}else I({id:-1,name:"",time:"",zoneId:-1,zone:"",temperature:0})}),[f,i]);var D=Object(n.useCallback)(Object(N.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getZones();case 2:t=e.sent,S(t);case 4:case"end":return e.stop()}}),e)}))),[]);Object(n.useEffect)((function(){D()}),[D]);var F=function(e){var t=C.find((function(t){return t.id===e}));return(null===t||void 0===t?void 0:t.name)||""},L=function(e,t){return I(Object(s.a)(Object(s.a)({},k),{},Object(h.a)({},e,t)))};return r.a.createElement("div",{className:"container"},r.a.createElement("form",{className:"mx-auto",onSubmit:function(e){e.preventDefault(),k.temperature=parseInt(k.temperature)||0,k.zoneId=parseInt(k.zoneId)||0,k.zone=F(k.zoneId),v?d(k):(k.id=i.length+1,m(k)),E.push("/")}},r.a.createElement("div",{className:"form-group col-sm-6 mx-auto"},r.a.createElement("label",{htmlFor:"schedule"},"Schedule Name"),r.a.createElement("input",{type:"text",className:"form-control mt-2",name:"name",id:"schedule",value:k.name,onChange:function(e){return L("name",e.target.value)}})),r.a.createElement("div",{className:"form-group col-sm-6 mx-auto"},r.a.createElement("label",{htmlFor:"zone"},"Zone"),r.a.createElement("select",{className:"form-control mt-2",name:"zoneId",value:k.zoneId,onChange:function(e){return L("zoneId",e.target.value)}},r.a.createElement("option",{value:"default"},"Choose..."),C.length>0&&C.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))),r.a.createElement("div",{className:"form-group col-sm-6 mx-auto"},r.a.createElement("label",{htmlFor:"time"},"Time"),r.a.createElement("input",{type:"time",className:"form-control mt-2",id:"time",name:"time",value:k.time,onChange:function(e){return L("time",e.target.value)}})),r.a.createElement("div",{className:"form-group col-sm-6 mx-auto"},r.a.createElement("label",{htmlFor:"temperature"},"Temperature"),r.a.createElement("div",{className:"input-group mt-2"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},"C"===b?"\xb0C":"\xb0F")),r.a.createElement("input",{id:"temperature",type:"number",className:"form-control",name:"temperature",value:k.temperature,onChange:function(e){return L("temperature",e.target.value)}}))),r.a.createElement("div",{className:"form-group col-sm-6 mx-auto mt-4"},r.a.createElement("button",{type:"submit",className:"btn btn-secondary px-4 mr-2",disabled:""===k.name||""===k.time||""===k.temperature||-1===k.zoneId?"disabled":""},v?"Update":"Create"," Schedule"),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary px-4"},"Cancel")))))},C=a(24),S=a(25),x=a(28),z=a(26),k=function(e){Object(x.a)(a,e);var t=Object(z.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).state={errorOccurred:!1},n}return Object(S.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({errorOccurred:!0}),function(e,t){console.log({error:e,info:t})}(e,t)}},{key:"render",value:function(){return this.state.errorOccurred?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("p",null,"Page not found, goto ",r.a.createElement(o.b,{to:"/",className:"btn btn-link"},"Home")))):this.props.children}}]),a}(n.Component),I=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(o.a,null,r.a.createElement(b,null,r.a.createElement(E,null),r.a.createElement("main",null,r.a.createElement(k,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:v}),r.a.createElement(l.b,{exact:!0,path:"/create",component:j}),r.a.createElement(l.b,{exact:!0,path:"/edit/:id",component:j}),r.a.createElement(l.a,{to:"/"}))))))))};Object(c.render)(r.a.createElement(I,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.db465407.chunk.js.map